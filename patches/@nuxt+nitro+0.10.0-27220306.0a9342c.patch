diff --git a/node_modules/@nuxt/nitro/dist/index.mjs b/node_modules/@nuxt/nitro/dist/index.mjs
index 5ac99ac..3ba57ff 100644
--- a/node_modules/@nuxt/nitro/dist/index.mjs
+++ b/node_modules/@nuxt/nitro/dist/index.mjs
@@ -764,7 +763,7 @@ const getRollupConfig = (nitroContext) => {
     },
     treeshake: {
       moduleSideEffects(id) {
-        return nitroContext.moduleSideEffects.some((match) => id.startsWith(match));
+        return id.includes("node_modules") || nitroContext.moduleSideEffects.some((match) => id.startsWith(match));
       }
     }
   };
@@ -839,7 +838,8 @@ const getRollupConfig = (nitroContext) => {
       "@/": nitroContext._nuxt.srcDir,
       "~~": nitroContext._nuxt.rootDir,
       "@@/": nitroContext._nuxt.rootDir,
-      ...env.alias
+      ...env.alias,
+			...nitroContext.alias,
     }
   }));
   const moduleDirectories = [
@@ -1524,6 +1524,7 @@ function getNitroContext(nuxtOptions, input) {
       inline: !nuxtOptions.dev,
       dirs: {}
     },
+		alias: nuxtOptions.alias || {},
     _nuxt: {
       majorVersion: nuxtOptions._majorVersion || 2,
       dev: nuxtOptions.dev,
